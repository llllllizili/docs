import{_ as s,c as a,o as n,f as l}from"./app-BfCDUtKQ.js";const e="/assets/2023-08-11-11-20-35-DB6TtLMJ.png",i="/assets/2023-08-11-14-29-59-Z4NH0g6E.png",o="/assets/2023-08-11-15-39-37-f6WzoJV6.png",r="/assets/2023-08-11-16-53-10-CiIkj6XP.png",p="/assets/2023-08-11-16-56-55-Cj7v77z9.png",t={},k=l('<p>Velero 云原生的灾难恢复和迁移工具，可将集群中的数据，备份到对象存储中（本地使用minio），在需要的时候进行恢复，也可以用来做集群环境的迁移</p><h2 id="工作流程" tabindex="-1"><a class="header-anchor" href="#工作流程"><span>工作流程</span></a></h2><p><a href="https://velero.io/docs/v1.11/how-velero-works/" target="_blank" rel="noopener noreferrer">How Velero Works</a></p><figure><img src="'+e+`" alt="官方图" tabindex="0" loading="lazy"><figcaption>官方图</figcaption></figure><p>velero 主要包含两部分</p><ul><li>部署在集群上的服务端</li><li>部署在管控机的客户端</li></ul><h3 id="备份流程" tabindex="-1"><a class="header-anchor" href="#备份流程"><span>备份流程</span></a></h3><ul><li>客户端发送指令，如 velero backup create test-backup</li><li>调用 Kubernetes API 服务器来创建一个 Backup 对象。</li><li>BackupController 通知新对象Backup 开始备份过程。</li><li>BackupController 开始备份过程。查询 API 资源来收集备份数据。</li><li>BackupController 调用对象存储服务（如 AWS S3）上传备份文件。</li></ul><h2 id="velero-特性" tabindex="-1"><a class="header-anchor" href="#velero-特性"><span>velero 特性</span></a></h2><ul><li>集群数据备份和恢复</li><li>迁移集群的资源到其他集群</li><li>将生产集群复制到开发和测试集群</li></ul><h2 id="存储支持" tabindex="-1"><a class="header-anchor" href="#存储支持"><span>存储支持</span></a></h2><p><mark>BackupStorageLocation</mark>: 用来定义 Kubernetes 集群资源的数据存放位置，也就是集群对象数据，不是 PVC 的数据。主要支持的后端存储是 S3 兼容的存储，比如：Mino 和阿里云 OSS 等。</p><p><mark>VolumeSnapshotLocation</mark>: 主要用来给 PV 做快照，需要云提供商提供插件。阿里云已经提供了插件，这个需要使用 CSI 等存储机制。你也可以使用专门的备份工具 <mark>Restic</mark>，把 PV 数据备份到阿里云 OSS 中去(安装时需要自定义选项)。</p><p><mark>Restic</mark> 是一款 GO 语言开发的数据加密备份工具，支持的仓库有 Local、SFTP、Aws S3、Minio、OpenStack Swift、Backblaze B2、Azure BS、Google Cloud storage、Rest Server。</p><p>项目地址：<a href="https://github.com/restic/restic" target="_blank" rel="noopener noreferrer">https://github.com/restic/restic</a></p><h2 id="前置准备" tabindex="-1"><a class="header-anchor" href="#前置准备"><span>前置准备</span></a></h2><h3 id="集群-兼容-信息" tabindex="-1"><a class="header-anchor" href="#集群-兼容-信息"><span>集群(兼容)信息</span></a></h3><p><a href="https://github.com/vmware-tanzu/velero#velero-compatibility-matrix" target="_blank" rel="noopener noreferrer">兼容列表</a></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> kubectl</span><span style="color:#98C379;--shiki-dark:#98C379;"> version</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --output</span><span style="color:#98C379;--shiki-dark:#98C379;"> json</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">  &quot;clientVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;major&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;1&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;minor&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;24&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;v1.24.2&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitCommit&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;f66044f4361b9f1f96f0053dd46cb7dce5e990a8&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitTreeState&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;clean&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;buildDate&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;2022-06-15T14:22:29Z&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;goVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;go1.18.3&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;compiler&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;gc&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;platform&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;darwin/arm64&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">  &quot;kustomizeVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;v4.5.4&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">  &quot;serverVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;major&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;1&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;minor&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;24&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;v1.24.4&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitCommit&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;95ee5ab382d64cfe6c28967f36b53970b8374491&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;gitTreeState&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;clean&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;buildDate&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;2022-08-17T18:47:37Z&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;goVersion&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;go1.18.5&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;compiler&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;gc&quot;,</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    &quot;platform&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;linux/amd64&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装velero-客户端" tabindex="-1"><a class="header-anchor" href="#安装velero-客户端"><span>安装velero 客户端</span></a></h3><p>方式一 macos</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">brew</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span></span></code></pre></div><p>方式二</p><p><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.11.1" target="_blank" rel="noopener noreferrer">git releases page</a></p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -xvf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">RELEASE-TARBALL-NAM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">E&gt;</span><span style="color:#98C379;--shiki-dark:#98C379;">.tar.gz</span></span></code></pre></div><h3 id="安装minio" tabindex="-1"><a class="header-anchor" href="#安装minio"><span>安装minio</span></a></h3><p>略</p><h3 id="创建bucket" tabindex="-1"><a class="header-anchor" href="#创建bucket"><span>创建bucket</span></a></h3><p>web界面或其他方式</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mc</span><span style="color:#98C379;--shiki-dark:#98C379;"> mb</span><span style="color:#98C379;--shiki-dark:#98C379;"> local/velero</span></span></code></pre></div><figure><img src="`+i+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="安装velero-服务端" tabindex="-1"><a class="header-anchor" href="#安装velero-服务端"><span>安装velero 服务端</span></a></h3><p>minio凭证</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">cat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">.credentials-velero</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">[default]</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">aws_access_key_id = username</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">aws_secret_access_key = password</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre></div><p><a href="https://github.com/vmware-tanzu/helm-charts/blob/main/charts/velero/README.md" target="_blank" rel="noopener noreferrer">helm chart</a></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> add</span><span style="color:#98C379;--shiki-dark:#98C379;"> vmware-tanzu</span><span style="color:#98C379;--shiki-dark:#98C379;"> https://vmware-tanzu.github.io/helm-charts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> vmware-tanzu/velero</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--namespace </span><span style="color:#98C379;--shiki-dark:#98C379;">velero</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--create-namespace </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set-file </span><span style="color:#98C379;--shiki-dark:#98C379;">credentials.secretContents.cloud=./credentials-velero</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].name=default</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].provider=aws</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].bucket=velero</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].config.region=minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].config.s3ForcePathStyle=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.backupStorageLocation[0].config.s3Url=http://jkstack-minio.middleware.svc.cluster.local:9000</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">configuration.defaultVolumesToFsBackup=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">snapshotsEnabled=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">false</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">deployNodeAgent=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">initContainers[0].name=velero-plugin-for-aws</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">initContainers[0].image=velero/velero-plugin-for-aws:latest</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">initContainers[0].imagePullPolicy=IfNotPresent</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">initContainers[0].volumeMounts[0].mountPath=/target</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--set </span><span style="color:#98C379;--shiki-dark:#98C379;">initContainers[0].volumeMounts[0].name=plugins</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+o+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>客户端已连上服务端，并查询和返回了版本信息</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> version</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Client:</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">	Version:</span><span style="color:#98C379;--shiki-dark:#98C379;"> v1.10.0</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">	Git</span><span style="color:#98C379;--shiki-dark:#98C379;"> commit:</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Server:</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">	Version:</span><span style="color:#98C379;--shiki-dark:#98C379;"> v1.11.1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># WARNING: the client version does not match the server version. Please update client</span></span></code></pre></div><h2 id="备份" tabindex="-1"><a class="header-anchor" href="#备份"><span>备份</span></a></h2><p><a href="https://velero.io/docs/v1.11/examples/" target="_blank" rel="noopener noreferrer">官方示例</a></p><p><a href="https://velero.io/docs/v1.11/backup-reference/" target="_blank" rel="noopener noreferrer">备份参考</a></p><p>新建了个mysql，并创建了个db</p><h3 id="创建备份" tabindex="-1"><a class="header-anchor" href="#创建备份"><span>创建备份</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#98C379;--shiki-dark:#98C379;"> mysql-backup</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --include-namespaces</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero-mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --wait</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> request</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;mysql-backup&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> submitted</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Waiting</span><span style="color:#98C379;--shiki-dark:#98C379;"> for</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> complete.</span><span style="color:#98C379;--shiki-dark:#98C379;"> You</span><span style="color:#98C379;--shiki-dark:#98C379;"> may</span><span style="color:#98C379;--shiki-dark:#98C379;"> safely</span><span style="color:#98C379;--shiki-dark:#98C379;"> press</span><span style="color:#98C379;--shiki-dark:#98C379;"> ctrl-c</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> stop</span><span style="color:#98C379;--shiki-dark:#98C379;"> waiting</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> your</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> will</span><span style="color:#98C379;--shiki-dark:#98C379;"> continue</span><span style="color:#98C379;--shiki-dark:#98C379;"> in</span><span style="color:#98C379;--shiki-dark:#98C379;"> the</span><span style="color:#98C379;--shiki-dark:#98C379;"> background.</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">.......</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> completed</span><span style="color:#98C379;--shiki-dark:#98C379;"> with</span><span style="color:#98C379;--shiki-dark:#98C379;"> status:</span><span style="color:#98C379;--shiki-dark:#98C379;"> Finalizing.</span><span style="color:#98C379;--shiki-dark:#98C379;"> You</span><span style="color:#98C379;--shiki-dark:#98C379;"> may</span><span style="color:#98C379;--shiki-dark:#98C379;"> check</span><span style="color:#98C379;--shiki-dark:#98C379;"> for</span><span style="color:#98C379;--shiki-dark:#98C379;"> more</span><span style="color:#98C379;--shiki-dark:#98C379;"> information</span><span style="color:#98C379;--shiki-dark:#98C379;"> using</span><span style="color:#98C379;--shiki-dark:#98C379;"> the</span><span style="color:#98C379;--shiki-dark:#98C379;"> commands</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup describe mysql-backup\`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> and</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup logs mysql-backup\`</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">.</span></span></code></pre></div><h3 id="模拟故障" tabindex="-1"><a class="header-anchor" href="#模拟故障"><span>模拟故障</span></a></h3><p>直接把服务删除了</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> uninstall</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero-mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -n</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero-mysql</span></span></code></pre></div><h3 id="恢复备份" tabindex="-1"><a class="header-anchor" href="#恢复备份"><span>恢复备份</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --from-backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> mysql-backup</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --wait</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Restore</span><span style="color:#98C379;--shiki-dark:#98C379;"> request</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;mysql-backup-20230811165240&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> submitted</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Waiting</span><span style="color:#98C379;--shiki-dark:#98C379;"> for</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> complete.</span><span style="color:#98C379;--shiki-dark:#98C379;"> You</span><span style="color:#98C379;--shiki-dark:#98C379;"> may</span><span style="color:#98C379;--shiki-dark:#98C379;"> safely</span><span style="color:#98C379;--shiki-dark:#98C379;"> press</span><span style="color:#98C379;--shiki-dark:#98C379;"> ctrl-c</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> stop</span><span style="color:#98C379;--shiki-dark:#98C379;"> waiting</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> your</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore</span><span style="color:#98C379;--shiki-dark:#98C379;"> will</span><span style="color:#98C379;--shiki-dark:#98C379;"> continue</span><span style="color:#98C379;--shiki-dark:#98C379;"> in</span><span style="color:#98C379;--shiki-dark:#98C379;"> the</span><span style="color:#98C379;--shiki-dark:#98C379;"> background.</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">......................................................</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Restore</span><span style="color:#98C379;--shiki-dark:#98C379;"> completed</span><span style="color:#98C379;--shiki-dark:#98C379;"> with</span><span style="color:#98C379;--shiki-dark:#98C379;"> status:</span><span style="color:#98C379;--shiki-dark:#98C379;"> Completed.</span><span style="color:#98C379;--shiki-dark:#98C379;"> You</span><span style="color:#98C379;--shiki-dark:#98C379;"> may</span><span style="color:#98C379;--shiki-dark:#98C379;"> check</span><span style="color:#98C379;--shiki-dark:#98C379;"> for</span><span style="color:#98C379;--shiki-dark:#98C379;"> more</span><span style="color:#98C379;--shiki-dark:#98C379;"> information</span><span style="color:#98C379;--shiki-dark:#98C379;"> using</span><span style="color:#98C379;--shiki-dark:#98C379;"> the</span><span style="color:#98C379;--shiki-dark:#98C379;"> commands</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore describe mysql-backup-20230811165240\`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> and</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> restore logs mysql-backup-20230811165240\`</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">.</span></span></code></pre></div><figure><img src="`+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>恢复成功,数据库仍在。</p><h3 id="删除备份" tabindex="-1"><a class="header-anchor" href="#删除备份"><span>删除备份</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> get</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">NAME</span><span style="color:#98C379;--shiki-dark:#98C379;">           STATUS</span><span style="color:#98C379;--shiki-dark:#98C379;">      ERRORS</span><span style="color:#98C379;--shiki-dark:#98C379;">   WARNINGS</span><span style="color:#98C379;--shiki-dark:#98C379;">   CREATED</span><span style="color:#98C379;--shiki-dark:#98C379;">                         EXPIRES</span><span style="color:#98C379;--shiki-dark:#98C379;">   STORAGE</span><span style="color:#98C379;--shiki-dark:#98C379;"> LOCATION</span><span style="color:#98C379;--shiki-dark:#98C379;">   SELECTOR</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mysql-backup</span><span style="color:#98C379;--shiki-dark:#98C379;">   Completed</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   0</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        0</span><span style="color:#98C379;--shiki-dark:#98C379;">          2023-08-11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 16:29:53</span><span style="color:#98C379;--shiki-dark:#98C379;"> +0800</span><span style="color:#98C379;--shiki-dark:#98C379;"> CST</span><span style="color:#98C379;--shiki-dark:#98C379;">   29d</span><span style="color:#98C379;--shiki-dark:#98C379;">       default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">            &lt;</span><span style="color:#98C379;--shiki-dark:#98C379;">non</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> delete</span><span style="color:#98C379;--shiki-dark:#98C379;"> mysql-backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Are</span><span style="color:#98C379;--shiki-dark:#98C379;"> you</span><span style="color:#98C379;--shiki-dark:#98C379;"> sure</span><span style="color:#98C379;--shiki-dark:#98C379;"> you</span><span style="color:#98C379;--shiki-dark:#98C379;"> want</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> continue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (Y/N)? y</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Request</span><span style="color:#98C379;--shiki-dark:#98C379;"> to</span><span style="color:#98C379;--shiki-dark:#98C379;"> delete</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;mysql-backup&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> submitted</span><span style="color:#98C379;--shiki-dark:#98C379;"> successfully.</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">The</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> will</span><span style="color:#98C379;--shiki-dark:#98C379;"> be</span><span style="color:#98C379;--shiki-dark:#98C379;"> fully</span><span style="color:#98C379;--shiki-dark:#98C379;"> deleted</span><span style="color:#98C379;--shiki-dark:#98C379;"> after</span><span style="color:#98C379;--shiki-dark:#98C379;"> all</span><span style="color:#98C379;--shiki-dark:#98C379;"> associated</span><span style="color:#98C379;--shiki-dark:#98C379;"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (disk </span><span style="color:#98C379;--shiki-dark:#98C379;">snapshots,</span><span style="color:#98C379;--shiki-dark:#98C379;"> backup</span><span style="color:#98C379;--shiki-dark:#98C379;"> files,</span><span style="color:#98C379;--shiki-dark:#98C379;"> restores</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) are removed.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span></span></code></pre></div><h2 id="定时备份" tabindex="-1"><a class="header-anchor" href="#定时备份"><span>定时备份</span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Create a backup every 6 hours</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#98C379;--shiki-dark:#98C379;"> schedule</span><span style="color:#98C379;--shiki-dark:#98C379;"> NAME</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --schedule=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;0 */6 * * *&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># every day or weekly</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> schedule</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#98C379;--shiki-dark:#98C379;"> NAME</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --schedule=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;30 09 * * *&quot;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> schedule</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#98C379;--shiki-dark:#98C379;"> NAME</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --schedule=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;30 10 * * 0&quot;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --include-cluster-resources=true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">velero</span><span style="color:#98C379;--shiki-dark:#98C379;"> schedule</span><span style="color:#98C379;--shiki-dark:#98C379;"> create</span><span style="color:#98C379;--shiki-dark:#98C379;"> NAME</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --include-namespaces</span><span style="color:#98C379;--shiki-dark:#98C379;"> NS</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --schedule</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;0 8 * * *&quot;</span></span></code></pre></div>`,57),c=[k];function d(h,C){return n(),a("div",null,c)}const u=s(t,[["render",d],["__file","velero.html.vue"]]),F=JSON.parse(`{"path":"/cloud-native/backup/velero.html","title":"Velero 云原生备份","lang":"zh-CN","frontmatter":{"article":true,"title":"Velero 云原生备份","order":11,"category":["云原生"],"tag":["Velero","backup"],"description":"Velero 云原生的灾难恢复和迁移工具，可将集群中的数据，备份到对象存储中（本地使用minio），在需要的时候进行恢复，也可以用来做集群环境的迁移 工作流程 How Velero Works 官方图官方图 velero 主要包含两部分 部署在集群上的服务端 部署在管控机的客户端 备份流程 客户端发送指令，如 velero backup create ...","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/cloud-native/backup/velero.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"Velero 云原生备份"}],["meta",{"property":"og:description","content":"Velero 云原生的灾难恢复和迁移工具，可将集群中的数据，备份到对象存储中（本地使用minio），在需要的时候进行恢复，也可以用来做集群环境的迁移 工作流程 How Velero Works 官方图官方图 velero 主要包含两部分 部署在集群上的服务端 部署在管控机的客户端 备份流程 客户端发送指令，如 velero backup create ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-16T05:38:25.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:tag","content":"Velero"}],["meta",{"property":"article:tag","content":"backup"}],["meta",{"property":"article:modified_time","content":"2024-12-16T05:38:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Velero 云原生备份\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-16T05:38:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"z\\",\\"url\\":\\"https://docs.lizili.online\\"}]}"]]},"headers":[{"level":2,"title":"工作流程","slug":"工作流程","link":"#工作流程","children":[{"level":3,"title":"备份流程","slug":"备份流程","link":"#备份流程","children":[]}]},{"level":2,"title":"velero 特性","slug":"velero-特性","link":"#velero-特性","children":[]},{"level":2,"title":"存储支持","slug":"存储支持","link":"#存储支持","children":[]},{"level":2,"title":"前置准备","slug":"前置准备","link":"#前置准备","children":[{"level":3,"title":"集群(兼容)信息","slug":"集群-兼容-信息","link":"#集群-兼容-信息","children":[]},{"level":3,"title":"安装velero 客户端","slug":"安装velero-客户端","link":"#安装velero-客户端","children":[]},{"level":3,"title":"安装minio","slug":"安装minio","link":"#安装minio","children":[]},{"level":3,"title":"创建bucket","slug":"创建bucket","link":"#创建bucket","children":[]},{"level":3,"title":"安装velero 服务端","slug":"安装velero-服务端","link":"#安装velero-服务端","children":[]}]},{"level":2,"title":"备份","slug":"备份","link":"#备份","children":[{"level":3,"title":"创建备份","slug":"创建备份","link":"#创建备份","children":[]},{"level":3,"title":"模拟故障","slug":"模拟故障","link":"#模拟故障","children":[]},{"level":3,"title":"恢复备份","slug":"恢复备份","link":"#恢复备份","children":[]},{"level":3,"title":"删除备份","slug":"删除备份","link":"#删除备份","children":[]}]},{"level":2,"title":"定时备份","slug":"定时备份","link":"#定时备份","children":[]}],"git":{"createdTime":1691747525000,"updatedTime":1734327505000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":1},{"name":"zili","email":"zili@zilimbp.local","commits":1}]},"readingTime":{"minutes":3.57,"words":1071},"filePathRelative":"cloud-native/backup/velero.md","localizedDate":"2023年8月11日","excerpt":"<p>Velero 云原生的灾难恢复和迁移工具，可将集群中的数据，备份到对象存储中（本地使用minio），在需要的时候进行恢复，也可以用来做集群环境的迁移</p>\\n<h2>工作流程</h2>\\n<p><a href=\\"https://velero.io/docs/v1.11/how-velero-works/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">How Velero Works</a></p>\\n<figure><figcaption>官方图</figcaption></figure>\\n<p>velero 主要包含两部分</p>\\n<ul>\\n<li>部署在集群上的服务端</li>\\n<li>部署在管控机的客户端</li>\\n</ul>","autoDesc":true}`);export{u as comp,F as data};

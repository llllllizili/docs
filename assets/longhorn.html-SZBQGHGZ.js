import{_ as c,c as k,e,w as n,b as s,h as a,f as o,g as r,o as d}from"./app-BfCDUtKQ.js";const h="/assets/2023-12-05-15-45-50-BCurAM5E.png",y={},F=o(`<h1 id="" tabindex="-1"><a class="header-anchor" href="#"><span></span></a></h1><p><a href="https://longhorn.io/docs/1.5.3/deploy/important-notes/" target="_blank" rel="noopener noreferrer">官方安装指导</a></p><p>支持多种安装方式，这里使用helm 安装</p><h2 id="前置准备" tabindex="-1"><a class="header-anchor" href="#前置准备"><span>前置准备</span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">yum</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --setopt=tsflags=noscripts</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#98C379;--shiki-dark:#98C379;"> iscsi-initiator-utils</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">echo</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;InitiatorName=$(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/sbin/iscsi-iname</span><span style="color:#98C379;--shiki-dark:#98C379;">)&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">/etc/iscsi/initiatorname.iscsi</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> enable</span><span style="color:#98C379;--shiki-dark:#98C379;"> iscsid</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> start</span><span style="color:#98C379;--shiki-dark:#98C379;"> iscsid</span></span></code></pre></div><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@zili01 ~]# systemctl status iscsid</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">●</span><span style="color:#98C379;--shiki-dark:#98C379;"> iscsid.service</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> Open-iSCSI</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   Loaded:</span><span style="color:#98C379;--shiki-dark:#98C379;"> loaded</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (/usr/lib/systemd/system/iscsid.service; </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">vendor</span><span style="color:#98C379;--shiki-dark:#98C379;"> preset:</span><span style="color:#98C379;--shiki-dark:#98C379;"> disabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   Active:</span><span style="color:#98C379;--shiki-dark:#98C379;"> active</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (running) since Mon 2023-12-04 16:36:21 CST; </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">9s</span><span style="color:#98C379;--shiki-dark:#98C379;"> ago</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">     Docs:</span><span style="color:#98C379;--shiki-dark:#98C379;"> man:iscsid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">           man:iscsiuio(8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">           man:iscsiadm(8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> Main</span><span style="color:#98C379;--shiki-dark:#98C379;"> PID:</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 22072</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (iscsid)</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   Status:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;Ready to process requests&quot;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    Tasks:</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   Memory:</span><span style="color:#98C379;--shiki-dark:#98C379;"> 1.8M</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   CGroup:</span><span style="color:#98C379;--shiki-dark:#98C379;"> /system.slice/iscsid.service</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">           └─22072</span><span style="color:#98C379;--shiki-dark:#98C379;"> /sbin/iscsid</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -f</span></span></code></pre></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>仓库添加</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> add</span><span style="color:#98C379;--shiki-dark:#98C379;"> longhorn</span><span style="color:#98C379;--shiki-dark:#98C379;"> https://charts.longhorn.io</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> update</span></span></code></pre></div><p>安装</p>`,10),C=s("div",{class:"language-shell","data-ext":"shell","data-title":"shell"},[s("pre",{class:"shiki shiki-themes one-dark-pro one-dark-pro vp-code",style:{"background-color":"#282c34","--shiki-dark-bg":"#282c34",color:"#abb2bf","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"helm"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," install"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn/longhorn"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --namespace"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn-system"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --create-namespace"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --version"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," 1.5.3")])])])],-1),A=s("div",{class:"language-shell","data-ext":"shell","data-title":"shell"},[s("pre",{class:"shiki shiki-themes one-dark-pro one-dark-pro vp-code",style:{"background-color":"#282c34","--shiki-dark-bg":"#282c34",color:"#abb2bf","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"helm"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," pull"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn/longhorn"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --version"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," 1.5.3")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"tar"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," -zxvf"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn-1.5.3.tgz")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#7F848E","font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 可修改values，这里仅改了下存储的路径")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"defaultSettings:")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"  defaultDataPath:"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," /data/longhorn")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#7F848E","font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 安装")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#61AFEF","--shiki-dark":"#61AFEF"}},"helm"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," upgrade"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --install"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," ."),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," -f"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," values.yaml"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," -n"),s("span",{style:{color:"#98C379","--shiki-dark":"#98C379"}}," longhorn-system"),s("span",{style:{color:"#D19A66","--shiki-dark":"#D19A66"}}," --create-namespace")])])])],-1),g=o(`<div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">❯</span><span style="color:#98C379;--shiki-dark:#98C379;"> kubectl</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -n</span><span style="color:#98C379;--shiki-dark:#98C379;"> longhorn-system</span><span style="color:#98C379;--shiki-dark:#98C379;"> get</span><span style="color:#98C379;--shiki-dark:#98C379;"> pod</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">NAME</span><span style="color:#98C379;--shiki-dark:#98C379;">                                                READY</span><span style="color:#98C379;--shiki-dark:#98C379;">   STATUS</span><span style="color:#98C379;--shiki-dark:#98C379;">    RESTARTS</span><span style="color:#98C379;--shiki-dark:#98C379;">   AGE</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">csi-attacher-79b44f5d-5xvhb</span><span style="color:#98C379;--shiki-dark:#98C379;">                         1/1</span><span style="color:#98C379;--shiki-dark:#98C379;">     Running</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   0</span><span style="color:#98C379;--shiki-dark:#98C379;">          8m32s</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">longhorn-ui-7c667cb6fc-rxlwp</span><span style="color:#98C379;--shiki-dark:#98C379;">                        1/1</span><span style="color:#98C379;--shiki-dark:#98C379;">     Running</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   0</span><span style="color:#98C379;--shiki-dark:#98C379;">          10m</span></span></code></pre></div><h2 id="访问" tabindex="-1"><a class="header-anchor" href="#访问"><span>访问</span></a></h2><p>longhorn 安装默认时安装了UI的。</p>`,3),B=o(`<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">ingress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  ## Set to true to enable ingress record generation</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">longhorn.zili.work</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  annotations</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    kubernetes.io/ingress.class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">nginx</span></span></code></pre></div><p>本机hosts文件中，添加记录。若生产环境，申请泛域名，做映射</p><div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">192.168.2.149 longhorn.zili.work</span></span></code></pre></div><figure><img src="`+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',4);function b(m,E){const t=r("Tabs"),p=r("RouteLink");return d(),k("div",null,[F,e(t,{id:"24",data:[{id:"在线安装"},{id:"离线安装"}]},{title0:n(({value:i,isActive:l})=>[a("在线安装")]),title1:n(({value:i,isActive:l})=>[a("离线安装")]),tab0:n(({value:i,isActive:l})=>[C]),tab1:n(({value:i,isActive:l})=>[A]),_:1}),g,s("p",null,[a("若需要访问，安装ingress ，开启longhorn的"),e(p,{to:"/ops/GitOps/deploy/infra/ingress.html"},{default:n(()=>[a("ingress")]),_:1}),a("即可")]),B])}const f=c(y,[["render",b],["__file","longhorn.html.vue"]]),v=JSON.parse(`{"path":"/ops/GitOps/deploy/infra/longhorn.html","title":"Longhorn","lang":"zh-CN","frontmatter":{"article":true,"title":"Longhorn","order":22,"category":["云原生","gitops"],"tag":["k8s","longhorn"],"index":true,"description":"官方安装指导 支持多种安装方式，这里使用helm 安装 前置准备 安装 仓库添加 安装 访问 longhorn 安装默认时安装了UI的。 若需要访问，安装ingress ，开启longhorn的即可 本机hosts文件中，添加记录。若生产环境，申请泛域名，做映射","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/ops/GitOps/deploy/infra/longhorn.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"Longhorn"}],["meta",{"property":"og:description","content":"官方安装指导 支持多种安装方式，这里使用helm 安装 前置准备 安装 仓库添加 安装 访问 longhorn 安装默认时安装了UI的。 若需要访问，安装ingress ，开启longhorn的即可 本机hosts文件中，添加记录。若生产环境，申请泛域名，做映射"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-12T03:42:17.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:tag","content":"k8s"}],["meta",{"property":"article:tag","content":"longhorn"}],["meta",{"property":"article:modified_time","content":"2024-03-12T03:42:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Longhorn\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-12T03:42:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"z\\",\\"url\\":\\"https://docs.lizili.online\\"}]}"]]},"headers":[{"level":2,"title":"前置准备","slug":"前置准备","link":"#前置准备","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"访问","slug":"访问","link":"#访问","children":[]}],"git":{"createdTime":1701783884000,"updatedTime":1710214937000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":1}]},"readingTime":{"minutes":1.04,"words":312},"filePathRelative":"ops/GitOps/deploy/infra/longhorn.md","localizedDate":"2023年12月5日","excerpt":"\\n<p><a href=\\"https://longhorn.io/docs/1.5.3/deploy/important-notes/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方安装指导</a></p>\\n<p>支持多种安装方式，这里使用helm 安装</p>\\n<h2>前置准备</h2>\\n<div class=\\"language-shell\\" data-ext=\\"shell\\" data-title=\\"shell\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">yum</span><span style=\\"color:#D19A66;--shiki-dark:#D19A66\\"> --setopt=tsflags=noscripts</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> install</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> iscsi-initiator-utils</span></span>\\n<span class=\\"line\\"><span style=\\"color:#56B6C2;--shiki-dark:#56B6C2\\">echo</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> \\"InitiatorName=$(</span><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">/sbin/iscsi-iname</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\">)\\"</span><span style=\\"color:#ABB2BF;--shiki-dark:#ABB2BF\\"> &gt; </span><span style=\\"color:#98C379;--shiki-dark:#98C379\\">/etc/iscsi/initiatorname.iscsi</span></span>\\n<span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">systemctl</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> enable</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> iscsid</span></span>\\n<span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">systemctl</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> start</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> iscsid</span></span></code></pre>\\n</div>","autoDesc":true}`);export{f as comp,v as data};

import{_ as a,c as s,o as e,f as t}from"./app-BfCDUtKQ.js";const n={},i=t(`<div class="hint-container caution"><p class="hint-container-title">请注意</p><p>本文内容可能已过时，请自行甄别。</p></div><h2 id="参数格式" tabindex="-1"><a class="header-anchor" href="#参数格式"><span>参数格式</span></a></h2><p><code>UserParameter=key[*],command</code></p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>Key</td><td>唯一. [*]表示里面可以传递多个参数</td></tr><tr><td>Command</td><td>需要执行的脚本，key的[]里面的参数一一对应$1到$9，一共9个参数。$0表示脚本命令.</td></tr></tbody></table><h2 id="功能开启" tabindex="-1"><a class="header-anchor" href="#功能开启"><span>功能开启</span></a></h2><p>配置文件中,开启include</p><p><code>Include=/etc/zabbix/zabbix_agentd.d/*.conf</code></p><h2 id="新建配置" tabindex="-1"><a class="header-anchor" href="#新建配置"><span>新建配置</span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#新建配置文件</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@elk zabbix_agentd.d]# ls</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mykey.conf</span><span style="color:#98C379;--shiki-dark:#98C379;">  userparameter_mysql.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#编辑配置文件</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@elk zabbix_agentd.d]# cat mykey.conf </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">UserParameter</span><span style="color:#98C379;--shiki-dark:#98C379;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> mykey,/etc/zabbix/script/test.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#编辑脚本(路径自定义)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@elk zabbix_agentd.d]# cat /etc/zabbix/script/test.sh</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">echo</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;1234324&#39;</span></span></code></pre></div><h2 id="重启服务" tabindex="-1"><a class="header-anchor" href="#重启服务"><span>重启服务</span></a></h2><p><code>systemctl restart zabbix-agent.service</code></p><h2 id="添加监控项" tabindex="-1"><a class="header-anchor" href="#添加监控项"><span>添加监控项</span></a></h2><p>前端web页面,相关主机上<code>创建监控项</code>即可,键值使用定义的key,如这里的<code>mykey</code>.信息类型根据实际情况指定</p><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">UserParameter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">ping[*</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">],echo </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">$1</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">web键值输入</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ping[0]</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> 将一直返回0</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ping[aaa]</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> 将一直返回</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;aaa&#39;</span></span></code></pre></div><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">统计一个文件中有多少行被匹配?</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">UserParameter</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">wc[*</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">],grep -c </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">$2</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> $1</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">如下方法将会返回文件中出现指定字符的行数</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">wc[/etc/passwd,root]</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">wc[/etc/services,zabbix]</span></span></code></pre></div>`,16),l=[i];function r(o,c){return e(),s("div",null,l)}const d=a(n,[["render",r],["__file","Zabbix自定义key.html.vue"]]),k=JSON.parse(`{"path":"/ops/monitor/zabbix/Zabbix%E8%87%AA%E5%AE%9A%E4%B9%89key.html","title":"Zabbix自定义key","lang":"zh-CN","frontmatter":{"article":false,"title":"Zabbix自定义key","order":1,"index":true,"category":["监控"],"tag":["zabbix"],"description":"请注意 本文内容可能已过时，请自行甄别。 参数格式 UserParameter=key[*],command 功能开启 配置文件中,开启include Include=/etc/zabbix/zabbix_agentd.d/*.conf 新建配置 重启服务 systemctl restart zabbix-agent.service 添加监控项 前端w...","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/ops/monitor/zabbix/Zabbix%E8%87%AA%E5%AE%9A%E4%B9%89key.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"Zabbix自定义key"}],["meta",{"property":"og:description","content":"请注意 本文内容可能已过时，请自行甄别。 参数格式 UserParameter=key[*],command 功能开启 配置文件中,开启include Include=/etc/zabbix/zabbix_agentd.d/*.conf 新建配置 重启服务 systemctl restart zabbix-agent.service 添加监控项 前端w..."}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-23T05:06:11.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:tag","content":"zabbix"}],["meta",{"property":"article:modified_time","content":"2024-04-23T05:06:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"Zabbix自定义key\\",\\"description\\":\\"请注意 本文内容可能已过时，请自行甄别。 参数格式 UserParameter=key[*],command 功能开启 配置文件中,开启include Include=/etc/zabbix/zabbix_agentd.d/*.conf 新建配置 重启服务 systemctl restart zabbix-agent.service 添加监控项 前端w...\\"}"]]},"headers":[{"level":2,"title":"参数格式","slug":"参数格式","link":"#参数格式","children":[]},{"level":2,"title":"功能开启","slug":"功能开启","link":"#功能开启","children":[]},{"level":2,"title":"新建配置","slug":"新建配置","link":"#新建配置","children":[]},{"level":2,"title":"重启服务","slug":"重启服务","link":"#重启服务","children":[]},{"level":2,"title":"添加监控项","slug":"添加监控项","link":"#添加监控项","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[]}],"git":{"createdTime":1709524122000,"updatedTime":1713848771000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":2}]},"readingTime":{"minutes":0.97,"words":290},"filePathRelative":"ops/monitor/zabbix/Zabbix自定义key.md","localizedDate":"2024年3月4日","excerpt":"<div class=\\"hint-container caution\\">\\n<p class=\\"hint-container-title\\">请注意</p>\\n<p>本文内容可能已过时，请自行甄别。</p>\\n</div>\\n<h2>参数格式</h2>\\n<p><code>UserParameter=key[*],command</code></p>\\n<table>\\n<thead>\\n<tr>\\n<th>参数</th>\\n<th>描述</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>Key</td>\\n<td>唯一. [*]表示里面可以传递多个参数</td>\\n</tr>\\n<tr>\\n<td>Command</td>\\n<td>需要执行的脚本，key的[]里面的参数一一对应$1到$9，一共9个参数。$0表示脚本命令.</td>\\n</tr>\\n</tbody>\\n</table>","autoDesc":true}`);export{d as comp,k as data};

import{_ as s}from"./2024-03-07-11-28-01-D5RgdACg.js";import{_ as t,c as a,b as e,h as r,e as n,w as i,f as p,g as l,o as c}from"./app-BfCDUtKQ.js";const h="/assets/2024-03-19-11-34-10-BFldJi7m.png",d={},m=e("h1",{id:"",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#"},[e("span")])],-1),u=p('<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p><a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">官方概述</a></p><figure><img src="'+s+'" alt="prometheus组件架构图" tabindex="0" loading="lazy"><figcaption>prometheus组件架构图</figcaption></figure><ol><li>Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。</li><li>TSDB：指标是任何系统了解其健康状况和运行状态的关键方面。任何系统的设计都需要收集、存储和报告指标，以提供系统的脉搏。数据存储在一系列时间间隔内，需要一个高效的数据库来存储和检索这些数据。OpenTSDB 时序数据库就是这样一种可以满足这种需求的时序数据库。</li><li>PromQL： Prometheus 以 PromQL 的形式定义了一种丰富的查询语言，用于从时序数据库中查询数据。</li><li>Pushgateway：可用于支持短期工作，代理等</li><li>导出器：它们用于将指标数据提升到普罗米修斯服务器。</li><li>Alertmanager：用于将通知发送到各种通信渠道，如 Slack、Email 以通知用户。</li><li>Exporter： 将监控数据采集的端点通过HTTP服务的形式暴露给Prometheus Server。分为两类，直接采集：这一类Exporter直接内置了对Prometheus监控的支持，比如cAdvisor，Kubernetes，Etcd，Gokit等。间接采集：间接采集，原有监控目标并不直接支持Prometheus，因此我们需要通过Prometheus提供的Client Library编写该监控目标的监控采集程序。例如： Mysql Exporter，JMX Exporter，Consul Exporter等。</li></ol><h2 id="promql" tabindex="-1"><a class="header-anchor" href="#promql"><span>PromQL</span></a></h2><p>待补充</p><h2 id="告警" tabindex="-1"><a class="header-anchor" href="#告警"><span>告警</span></a></h2><h2 id="prometheus-operator" tabindex="-1"><a class="header-anchor" href="#prometheus-operator"><span>Prometheus Operator</span></a></h2><figure><img src="'+h+`" alt="Prometheus Operator 架构" tabindex="0" loading="lazy"><figcaption>Prometheus Operator 架构</figcaption></figure><p>没有Operator的时候，监控逻辑是：<code>export</code> 暴露端口，server端通过<code>pull</code>的方式去拿取数据，具体拿那个，相应的配置在server端配置.<br> 通常是编辑<code>prometheus.yml</code>，并在<code>scrape_configs</code>节点下添加以下内容:</p><div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">scrape_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">job_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;prometheus&#39;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    static_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">targets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: [</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;localhost:9090&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 采集node exporter监控数据</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">job_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;node&#39;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    static_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">targets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: [</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;localhost:9100&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span></code></pre></div><p>如果使用<code>Operator</code>的方式，</p><h2 id="operator监控集群外服务" tabindex="-1"><a class="header-anchor" href="#operator监控集群外服务"><span>Operator监控集群外服务</span></a></h2>`,13);function B(k,y){const o=l("RouteLink");return c(),a("div",null,[m,e("p",null,[r("建议使用 kube-prometheus，参考"),n(o,{to:"/ops/monitor/prometheus/Prometheus%20Operator%20%E4%B8%8E%20kube-prometheus.html"},{default:i(()=>[r("Prometheus Operator 与 kube-prometheus")]),_:1})]),u])}const E=t(d,[["render",B],["__file","01-README.html.vue"]]),_=JSON.parse(`{"path":"/ops/monitor/prometheus/01-README.html","title":"Prometheus","lang":"zh-CN","frontmatter":{"article":true,"title":"Prometheus","icon":null,"order":1,"index":false,"description":"建议使用 kube-prometheus，参考 介绍 官方概述 prometheus组件架构图prometheus组件架构图 Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。 TSDB：指标是任何系统了解其健康状况和运行状...","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/ops/monitor/prometheus/01-README.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"Prometheus"}],["meta",{"property":"og:description","content":"建议使用 kube-prometheus，参考 介绍 官方概述 prometheus组件架构图prometheus组件架构图 Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。 TSDB：指标是任何系统了解其健康状况和运行状..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-21T13:21:43.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:modified_time","content":"2024-03-21T13:21:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Prometheus\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-21T13:21:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"z\\",\\"url\\":\\"https://docs.lizili.online\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"PromQL","slug":"promql","link":"#promql","children":[]},{"level":2,"title":"告警","slug":"告警","link":"#告警","children":[]},{"level":2,"title":"Prometheus Operator","slug":"prometheus-operator","link":"#prometheus-operator","children":[]},{"level":2,"title":"Operator监控集群外服务","slug":"operator监控集群外服务","link":"#operator监控集群外服务","children":[]}],"git":{"createdTime":1711027303000,"updatedTime":1711027303000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":1}]},"readingTime":{"minutes":1.8,"words":539},"filePathRelative":"ops/monitor/prometheus/01-README.md","localizedDate":"2024年3月21日","excerpt":"\\n<p>建议使用 kube-prometheus，参考<a href=\\"/ops/monitor/prometheus/Prometheus%20Operator%20%E4%B8%8E%20kube-prometheus.html\\" target=\\"_blank\\">Prometheus Operator 与 kube-prometheus</a></p>\\n<h2>介绍</h2>\\n<p><a href=\\"https://prometheus.io/docs/introduction/overview/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方概述</a></p>","autoDesc":true}`);export{E as comp,_ as data};

import{_ as n}from"./2024-03-07-11-28-01-D5RgdACg.js";import{_ as r}from"./2024-03-21-11-34-41-B4a-Uzi6.js";import{_ as i,c as l,b as s,h as a,e as o,w as p,f as t,g as c,o as k}from"./app-BfCDUtKQ.js";const d="/assets/2024-03-21-11-28-18-DEa0V-sD.png",h="/assets/2024-03-21-11-43-14-dzmcQ-mm.png",B="/assets/2024-03-08-11-30-20-uc9JmoSY.png",y={},C=s("h1",{id:"",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#"},[s("span")])],-1),u=t('<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p><a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">官方概述</a></p><figure><img src="'+n+`" alt="prometheus组件架构图" tabindex="0" loading="lazy"><figcaption>prometheus组件架构图</figcaption></figure><ol><li>Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。</li><li>TSDB：指标是任何系统了解其健康状况和运行状态的关键方面。任何系统的设计都需要收集、存储和报告指标，以提供系统的脉搏。数据存储在一系列时间间隔内，需要一个高效的数据库来存储和检索这些数据。OpenTSDB 时序数据库就是这样一种可以满足这种需求的时序数据库。</li><li>PromQL： Prometheus 以 PromQL 的形式定义了一种丰富的查询语言，用于从时序数据库中查询数据。</li><li>Pushgateway：可用于支持短期工作，代理等</li><li>导出器：它们用于将指标数据提升到普罗米修斯服务器。</li><li>Alertmanager：用于将通知发送到各种通信渠道，如 Slack、Email 以通知用户。</li><li>Exporter： 将监控数据采集的端点通过HTTP服务的形式暴露给Prometheus Server。分为两类，直接采集：这一类Exporter直接内置了对Prometheus监控的支持，比如cAdvisor，Kubernetes，Etcd，Gokit等。间接采集：间接采集，原有监控目标并不直接支持Prometheus，因此我们需要通过Prometheus提供的Client Library编写该监控目标的监控采集程序。例如： Mysql Exporter，JMX Exporter，Consul Exporter等。</li></ol><h3 id="server" tabindex="-1"><a class="header-anchor" href="#server"><span>server</span></a></h3><p><a href="https://prometheus.io/download/" target="_blank" rel="noopener noreferrer">https://prometheus.io/download/</a></p><h4 id="解压" tabindex="-1"><a class="header-anchor" href="#解压"><span>解压</span></a></h4><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">drwxr-xr-x</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   38</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:21</span><span style="color:#98C379;--shiki-dark:#98C379;"> console_libraries</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">drwxr-xr-x</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  173</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:21</span><span style="color:#98C379;--shiki-dark:#98C379;"> consoles</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#98C379;--shiki-dark:#98C379;">  12K</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:21</span><span style="color:#98C379;--shiki-dark:#98C379;"> LICENSE</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3.7K</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:21</span><span style="color:#98C379;--shiki-dark:#98C379;"> NOTICE</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">-rwxr-xr-x</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#98C379;--shiki-dark:#98C379;"> 128M</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:10</span><span style="color:#98C379;--shiki-dark:#98C379;"> prometheus</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">-rw-r--r--</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  934</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:21</span><span style="color:#98C379;--shiki-dark:#98C379;"> prometheus.yml</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">-rwxr-xr-x</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> nginx</span><span style="color:#98C379;--shiki-dark:#98C379;"> docker</span><span style="color:#98C379;--shiki-dark:#98C379;"> 120M</span><span style="color:#98C379;--shiki-dark:#98C379;"> 3月</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  11</span><span style="color:#98C379;--shiki-dark:#98C379;"> 23:10</span><span style="color:#98C379;--shiki-dark:#98C379;"> promtool</span></span></code></pre></div><h4 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h4><p>默认加载当前路径下的 <code>prometheus.yaml</code>,默认的存储路径为当前目录的<code>data/</code>, 也可以通过<code>--storage.tsdb.path=&quot;data/&quot;</code>指定路径</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">./prometheus</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --storage.tsdb.path=</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;data/&quot;</span></span></code></pre></div><h3 id="node-exporter" tabindex="-1"><a class="header-anchor" href="#node-exporter"><span>node exporter</span></a></h3><p><a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/node_exporter</a></p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -zxvf</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter-1.7.0.linux-amd64.tar.gz</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">cd</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter-1.7.0.linux-amd64</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mv</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter</span><span style="color:#98C379;--shiki-dark:#98C379;"> /usr/local/bin/</span></span></code></pre></div><p>启动脚本</p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">cat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">/etc/systemd/system/node_exporter.service</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&quot;EOF&quot;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">[Unit]</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">Description=node_export</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">Documentation=https://github.com/prometheus/node_exporter</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">[Service]</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">ExecStart=/opt/prometheus/node_exporter</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">Restart=on-failure</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">[Install]</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre></div><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> daemon-reload</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> enable</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> start</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> status</span><span style="color:#98C379;--shiki-dark:#98C379;"> node_exporter</span></span></code></pre></div><p>访问9100端口</p><figure><img src="`+d+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="添加target" tabindex="-1"><a class="header-anchor" href="#添加target"><span>添加target</span></a></h3><p>修改Prometheus配置文件，编辑prometheus.yml并在scrape_configs节点下添加内容</p><div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">scrape_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">job_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;prometheus&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    static_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">targets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: [</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;localhost:9090&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 采集node exporter监控数据，这里定义的node 会在server中看到</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">job_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;node&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    static_configs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">targets</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        - </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;192.168.1.32:9100&quot;</span></span></code></pre></div><figure><img src="`+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="图形化" tabindex="-1"><a class="header-anchor" href="#图形化"><span>图形化</span></a></h3><h4 id="数据源" tabindex="-1"><a class="header-anchor" href="#数据源"><span>数据源</span></a></h4><figure><img src="'+h+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>选模版即可,也可以自己通过PromeQL语句，自行定义</p><p><a href="https://grafana.com/grafana/dashboards/" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards/</a></p><h2 id="云原生" tabindex="-1"><a class="header-anchor" href="#云原生"><span>云原生</span></a></h2><h3 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> pull</span><span style="color:#98C379;--shiki-dark:#98C379;"> oci://registry-1.docker.io/bitnamicharts/prometheus</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --version</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0.12.1</span></span></code></pre></div><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h3><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">global</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  imageRegistry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">ingress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  apiVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">alertmanager</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  replicaCount</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  ingress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">alert.prometheus.zili.work</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">/</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    annotations</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      kubernetes.io/ingress.class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  service</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">LoadBalancer</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  replicaCount</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  thanos</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    create</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  ingress</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    enabled</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    pathType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">ImplementationSpecific</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">prometheus.zili.work</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    ingressClassName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;nginx&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">/</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    annotations</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      kubernetes.io/ingress.class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> upgrade</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --install</span><span style="color:#98C379;--shiki-dark:#98C379;"> prometheus</span><span style="color:#98C379;--shiki-dark:#98C379;"> .</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -f</span><span style="color:#98C379;--shiki-dark:#98C379;"> prometheus-values.yaml</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -n</span><span style="color:#98C379;--shiki-dark:#98C379;"> prometheus</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --create-namespace</span></span></code></pre></div><figure><img src="`+B+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',36);function m(A,b){const e=c("RouteLink");return k(),l("div",null,[C,s("p",null,[a("建议使用 kube-prometheus，参考"),o(e,{to:"/ops/monitor/prometheus/Prometheus%20Operator%20%E4%B8%8E%20kube-prometheus.html"},{default:p(()=>[a("Prometheus Operator 与 kube-prometheus")]),_:1})]),u])}const v=i(y,[["render",m],["__file","02-Prometheus-quick-start.html.vue"]]),x=JSON.parse(`{"path":"/ops/monitor/prometheus/02-Prometheus-quick-start.html","title":"quick start","lang":"zh-CN","frontmatter":{"article":true,"title":"quick start","icon":null,"order":2,"index":true,"description":"建议使用 kube-prometheus，参考 介绍 官方概述 prometheus组件架构图prometheus组件架构图 Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。 TSDB：指标是任何系统了解其健康状况和运行状...","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/ops/monitor/prometheus/02-Prometheus-quick-start.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"quick start"}],["meta",{"property":"og:description","content":"建议使用 kube-prometheus，参考 介绍 官方概述 prometheus组件架构图prometheus组件架构图 Prometheus Server：存储和抓取时间序列数据的主要服务器，且内置的Express Browser UI，通过这个UI可以直接通过PromQL实现数据的查询以及可视化。 TSDB：指标是任何系统了解其健康状况和运行状..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-21T13:21:43.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:modified_time","content":"2024-03-21T13:21:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"quick start\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-21T13:21:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"z\\",\\"url\\":\\"https://docs.lizili.online\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[{"level":3,"title":"server","slug":"server","link":"#server","children":[]},{"level":3,"title":"node exporter","slug":"node-exporter","link":"#node-exporter","children":[]},{"level":3,"title":"添加target","slug":"添加target","link":"#添加target","children":[]},{"level":3,"title":"图形化","slug":"图形化","link":"#图形化","children":[]}]},{"level":2,"title":"云原生","slug":"云原生","link":"#云原生","children":[{"level":3,"title":"下载","slug":"下载","link":"#下载","children":[]},{"level":3,"title":"配置","slug":"配置","link":"#配置","children":[]},{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]}]}],"git":{"createdTime":1711027303000,"updatedTime":1711027303000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":1}]},"readingTime":{"minutes":2.69,"words":807},"filePathRelative":"ops/monitor/prometheus/02-Prometheus-quick-start.md","localizedDate":"2024年3月21日","excerpt":"\\n<p>建议使用 kube-prometheus，参考<a href=\\"/ops/monitor/prometheus/Prometheus%20Operator%20%E4%B8%8E%20kube-prometheus.html\\" target=\\"_blank\\">Prometheus Operator 与 kube-prometheus</a></p>\\n<h2>介绍</h2>\\n<p><a href=\\"https://prometheus.io/docs/introduction/overview/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方概述</a></p>","autoDesc":true}`);export{v as comp,x as data};

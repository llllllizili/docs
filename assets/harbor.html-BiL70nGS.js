import{_ as e,c as n,b as l,e as i,w as r,f as s,g as o,o as p,h as t}from"./app-BfCDUtKQ.js";const c={},d=s(`<h1 id="" tabindex="-1"><a class="header-anchor" href="#"><span></span></a></h1><p><a href="https://github.com/goharbor/harbor-helm" target="_blank" rel="noopener noreferrer">官方文档</a></p><h2 id="-1" tabindex="-1"><a class="header-anchor" href="#-1"><span></span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> add</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor</span><span style="color:#98C379;--shiki-dark:#98C379;"> https://helm.goharbor.io</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> repo</span><span style="color:#98C379;--shiki-dark:#98C379;"> update</span></span></code></pre></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> pull</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor/harbor</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  --version</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1.13.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -zxvf</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor-1.13.1.tgz</span></span></code></pre></div><h3 id="values修改" tabindex="-1"><a class="header-anchor" href="#values修改"><span>values修改</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">cat</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &lt;&lt; </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EOF</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">harbor-values.yaml</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">expose:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  type: ingress</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  tls:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    enabled: false</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  ingress:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    hosts:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      core: harbor.zili.work</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    annotations:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">        ingressClassName: nginx</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    harbor:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      annotations:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">        ingressClassName: nginx</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">externalURL: http://harbor.zili.work</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">persistence:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  enabled: true</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  persistentVolumeClaim:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    registry:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      accessMode: ReadWriteOnce</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      size: 2Gi</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">    trivy:</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      accessMode: ReadWriteOnce</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">      size: 2Gi</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">harborAdminPassword: &quot;Harbor12345&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h3><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">helm</span><span style="color:#98C379;--shiki-dark:#98C379;"> upgrade</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --install</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor</span><span style="color:#98C379;--shiki-dark:#98C379;"> .</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -f</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor-values.yaml</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -n</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --create-namespace</span></span></code></pre></div><h3 id="域名解析" tabindex="-1"><a class="header-anchor" href="#域名解析"><span>域名解析</span></a></h3>`,11),h=s(`<h3 id="_404" tabindex="-1"><a class="header-anchor" href="#_404"><span>404</span></a></h3><p><a href="https://github.com/goharbor/harbor-helm/issues/1189" target="_blank" rel="noopener noreferrer">404修复</a></p><div class="language-shell" data-ext="shell" data-title="shell"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">kubectl</span><span style="color:#98C379;--shiki-dark:#98C379;"> edit</span><span style="color:#98C379;--shiki-dark:#98C379;"> ingress/harbor-ingress</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --namespace</span><span style="color:#98C379;--shiki-dark:#98C379;"> harbor</span></span></code></pre></div><div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">在 spec 下 追加一行  ingressClassName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">nginx。 如下</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">spec</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">   ingressClassName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">   rules</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">harbor.zili.work</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">     http</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">       paths</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">       - </span><span style="color:#E06C75;--shiki-dark:#E06C75;">backend</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">       ....</span></span></code></pre></div>`,4);function k(b,C){const a=o("RouteLink");return p(),n("div",null,[d,l("p",null,[i(a,{to:"/ops/GitOps/deploy/cloud-native/add-domain-on-CoreDNS.html"},{default:r(()=>[t("CoreDNS 添加域名解析")]),_:1})]),h])}const m=e(c,[["render",k],["__file","harbor.html.vue"]]),v=JSON.parse(`{"path":"/ops/GitOps/deploy/tool/harbor.html","title":"harbor","lang":"zh-CN","frontmatter":{"article":true,"title":"harbor","order":11,"category":["云原生","gitops"],"tag":["gitops","harbor"],"index":true,"description":"官方文档 安装 values修改 部署 域名解析 404 404修复","head":[["meta",{"property":"og:url","content":"https://docs.lizili.online/ops/GitOps/deploy/tool/harbor.html"}],["meta",{"property":"og:site_name","content":"lzz's Blog"}],["meta",{"property":"og:title","content":"harbor"}],["meta",{"property":"og:description","content":"官方文档 安装 values修改 部署 域名解析 404 404修复"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-12T03:42:17.000Z"}],["meta",{"property":"article:author","content":"z"}],["meta",{"property":"article:tag","content":"gitops"}],["meta",{"property":"article:tag","content":"harbor"}],["meta",{"property":"article:modified_time","content":"2024-03-12T03:42:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"harbor\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-12T03:42:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"z\\",\\"url\\":\\"https://docs.lizili.online\\"}]}"]]},"headers":[{"level":2,"title":"","slug":"-1","link":"#-1","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[{"level":3,"title":"values修改","slug":"values修改","link":"#values修改","children":[]},{"level":3,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":3,"title":"域名解析","slug":"域名解析","link":"#域名解析","children":[]},{"level":3,"title":"404","slug":"_404","link":"#_404","children":[]}]}],"git":{"createdTime":1702302031000,"updatedTime":1710214937000,"contributors":[{"name":"lizili","email":"cn.zili.lee@outlook.com","commits":1}]},"readingTime":{"minutes":0.53,"words":158},"filePathRelative":"ops/GitOps/deploy/tool/harbor.md","localizedDate":"2023年12月11日","excerpt":"\\n<p><a href=\\"https://github.com/goharbor/harbor-helm\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方文档</a></p>\\n<h2></h2>\\n<div class=\\"language-shell\\" data-ext=\\"shell\\" data-title=\\"shell\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">helm</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> repo</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> add</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> harbor</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> https://helm.goharbor.io</span></span>\\n<span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">helm</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> repo</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> update</span></span></code></pre>\\n</div>","autoDesc":true}`);export{m as comp,v as data};
